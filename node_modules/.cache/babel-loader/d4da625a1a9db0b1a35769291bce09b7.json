{"ast":null,"code":"import { useEffect, useMemo, useState } from 'react';\nimport debounce from './lib/debounce';\nimport flattenOptions from './lib/flattenOptions';\nexport default function useFetch(q, defaultOptions, _ref) {\n  let {\n    debounceTime,\n    filterOptions,\n    getOptions\n  } = _ref;\n  const [fetching, setFetching] = useState(false);\n  const [options, setOptions] = useState(() => flattenOptions(defaultOptions));\n  const fetch = useMemo(() => {\n    const filter = filterOptions || (op => () => op);\n\n    if (!getOptions) {\n      return s => setOptions(flattenOptions(filter(defaultOptions)(s)));\n    }\n\n    return debounce(s => {\n      const optionsReq = getOptions(s, defaultOptions);\n      setFetching(true);\n      Promise.resolve(optionsReq).then(newOptions => {\n        setOptions(flattenOptions(filter(newOptions)(s)));\n      }).finally(() => setFetching(false));\n    }, debounceTime);\n  }, [filterOptions, defaultOptions, getOptions, debounceTime]);\n  useEffect(() => setOptions(defaultOptions), [defaultOptions]);\n  useEffect(() => fetch(q), [fetch, q]);\n  return {\n    options,\n    setOptions,\n    fetching\n  };\n}","map":{"version":3,"names":["useEffect","useMemo","useState","debounce","flattenOptions","useFetch","q","defaultOptions","_ref","debounceTime","filterOptions","getOptions","fetching","setFetching","options","setOptions","fetch","filter","op","s","optionsReq","Promise","resolve","then","newOptions","finally"],"sources":["/Users/nithu/Desktop/VetDemo/vetdemo1-app/node_modules/react-select-search/dist/esm/useFetch.js"],"sourcesContent":["import { useEffect, useMemo, useState } from 'react';\nimport debounce from './lib/debounce';\nimport flattenOptions from './lib/flattenOptions';\nexport default function useFetch(q, defaultOptions, _ref) {\n  let {\n    debounceTime,\n    filterOptions,\n    getOptions\n  } = _ref;\n  const [fetching, setFetching] = useState(false);\n  const [options, setOptions] = useState(() => flattenOptions(defaultOptions));\n  const fetch = useMemo(() => {\n    const filter = filterOptions || (op => () => op);\n\n    if (!getOptions) {\n      return s => setOptions(flattenOptions(filter(defaultOptions)(s)));\n    }\n\n    return debounce(s => {\n      const optionsReq = getOptions(s, defaultOptions);\n      setFetching(true);\n      Promise.resolve(optionsReq).then(newOptions => {\n        setOptions(flattenOptions(filter(newOptions)(s)));\n      }).finally(() => setFetching(false));\n    }, debounceTime);\n  }, [filterOptions, defaultOptions, getOptions, debounceTime]);\n  useEffect(() => setOptions(defaultOptions), [defaultOptions]);\n  useEffect(() => fetch(q), [fetch, q]);\n  return {\n    options,\n    setOptions,\n    fetching\n  };\n}"],"mappings":"AAAA,SAASA,SAAT,EAAoBC,OAApB,EAA6BC,QAA7B,QAA6C,OAA7C;AACA,OAAOC,QAAP,MAAqB,gBAArB;AACA,OAAOC,cAAP,MAA2B,sBAA3B;AACA,eAAe,SAASC,QAAT,CAAkBC,CAAlB,EAAqBC,cAArB,EAAqCC,IAArC,EAA2C;EACxD,IAAI;IACFC,YADE;IAEFC,aAFE;IAGFC;EAHE,IAIAH,IAJJ;EAKA,MAAM,CAACI,QAAD,EAAWC,WAAX,IAA0BX,QAAQ,CAAC,KAAD,CAAxC;EACA,MAAM,CAACY,OAAD,EAAUC,UAAV,IAAwBb,QAAQ,CAAC,MAAME,cAAc,CAACG,cAAD,CAArB,CAAtC;EACA,MAAMS,KAAK,GAAGf,OAAO,CAAC,MAAM;IAC1B,MAAMgB,MAAM,GAAGP,aAAa,KAAKQ,EAAE,IAAI,MAAMA,EAAjB,CAA5B;;IAEA,IAAI,CAACP,UAAL,EAAiB;MACf,OAAOQ,CAAC,IAAIJ,UAAU,CAACX,cAAc,CAACa,MAAM,CAACV,cAAD,CAAN,CAAuBY,CAAvB,CAAD,CAAf,CAAtB;IACD;;IAED,OAAOhB,QAAQ,CAACgB,CAAC,IAAI;MACnB,MAAMC,UAAU,GAAGT,UAAU,CAACQ,CAAD,EAAIZ,cAAJ,CAA7B;MACAM,WAAW,CAAC,IAAD,CAAX;MACAQ,OAAO,CAACC,OAAR,CAAgBF,UAAhB,EAA4BG,IAA5B,CAAiCC,UAAU,IAAI;QAC7CT,UAAU,CAACX,cAAc,CAACa,MAAM,CAACO,UAAD,CAAN,CAAmBL,CAAnB,CAAD,CAAf,CAAV;MACD,CAFD,EAEGM,OAFH,CAEW,MAAMZ,WAAW,CAAC,KAAD,CAF5B;IAGD,CANc,EAMZJ,YANY,CAAf;EAOD,CAdoB,EAclB,CAACC,aAAD,EAAgBH,cAAhB,EAAgCI,UAAhC,EAA4CF,YAA5C,CAdkB,CAArB;EAeAT,SAAS,CAAC,MAAMe,UAAU,CAACR,cAAD,CAAjB,EAAmC,CAACA,cAAD,CAAnC,CAAT;EACAP,SAAS,CAAC,MAAMgB,KAAK,CAACV,CAAD,CAAZ,EAAiB,CAACU,KAAD,EAAQV,CAAR,CAAjB,CAAT;EACA,OAAO;IACLQ,OADK;IAELC,UAFK;IAGLH;EAHK,CAAP;AAKD"},"metadata":{},"sourceType":"module"}